{% extends 'base.html' %}{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link href="style.css" rel="stylesheet" type="text/css" />
    <title>Trip Itinerary</title>
</head>
<body>
  <!-- Page Content -->
  <div class="container">
    <div class="row">
      <div class="col-lg-9">
          <div class="card-header">
 
     
  
          
   
      </div>

 
        <td class="_id" {{tripInfo._id}} hidden></td>
      
        <div class="card card-outline-secondary my-4">
   
              <div class="card-header">
          <strong>Search Results</strong><br><br>
  
                     
          <select class="form-control" name="country">
          <option disabled selected>Select Country of Visit</option>
          {% for tripInfo in tripInfo %}
          <option value="country">{{tripInfo.country}}</option>
          
          {% endfor %}
          </select><br>
          
          <select class="form-control" name="country">
          <option disabled selected>Select Country of Visit</option>
          {% for tripInfo in tripInfo %}
          <option value="city">{{tripInfo.city}}</option>
          
          {% endfor %}
          </select><br>
          
          <input type="submit" value="Submit"/>

          </div>
         </form>
         
        <table class="table table-bordered">
        <thead>
        <tr>
        <th scope="col">Id</th>
        <th scope="col">Country</th>
        <th scope="col">City</th>
        <th scope="col">Trip Start Date</th>
        <th scope="col">Trip End Date</th>
        <th scope="col">Trip Title</th>
        <th scope="col">Trip Ratings</th>
        <th scope="col">Posted By</th>
        <th scope="col">Details</th>
      </tr>
    </thead>
    <tbody>
     {% for tripInfo in tripInfo %}
    <tr>
      <th scope="row">1</th>
        <td class="_id">{{tripInfo._id}}</td>
        <td class="country">{{tripInfo.country }}</td>  
        <td class="city">{{ tripInfo.city}}</td>  
        <td class="startdate">{{tripInfo.startdate }}</td>  
        <td class="enddate">{{ tripInfo.enddate}}</td>  
        <td class="triptitle">{{ tripInfo.triptitle}}</td>  
        <td class="ratings">{{ tripInfo.ratings }}</td>
        <td class="name">{{tripInfo.name}}</td>
        <a href="{{url_for('landingpagesummary_trip', tripId = tripInfo._id)}}" class="btn btn-info center-block">Click For Trip Details!</a>
    </tr>
       {% endfor %}

  </tbody>
</table> 
         
<br>
        <a href="{{url_for('index', tripInfo=tripInfo)}}" class="btn btn-info center-success">Previous Page</a>
        <!-- /.col-lg-9 -->
        
       </div>
      </div>
    </div>
  </div>
  <!-- /.container -->
  <br>
  <!-- Footer -->
  <footer class="py-5 bg-dark">
    <div class="container">
      <p class="m-0 text-center text-white">Copyright &copy; Your Website 2019</p>
    </div>
    <!-- /.container -->
  </footer>

  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

</body>

</html>

{% endblock content %} 

@app.route('/list', methods=['GET','POST'])
def lists():
    if request.method == 'POST':
        country = request.form['country']#form input on initial position
       
        tripInfo=conn[DATABASE_NAME][COLLECTION_NAME].find()#check all documents in collection
        return render_template('search.html', tripInfo=tripInfo)

    for record in tripInfo:
        if (record['country'] == country):
            return 'route found'
        else:
            return 'sorry route not found'

    return render_template('search.html',tripInfo=tripInfo)